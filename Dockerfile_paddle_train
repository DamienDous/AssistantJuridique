# Dockerfile_paddle_train
FROM paddleocr-model:latest

ENV DEBIAN_FRONTEND=noninteractive \
    TZ=Europe/Paris \
    PYTHONUNBUFFERED=1

# Outils utiles
RUN apt-get update && apt-get install -y --no-install-recommends \
    imagemagick rsync jq && \
    rm -rf /var/lib/apt/lists/*

# Copie les scripts et les fichiers de configuration
COPY OCR/PADDLE_TRAINING/   /workspace/

# Normaliser fins de lignes & rendre ex√©cutables pour TOUS les .sh et .py
RUN find /workspace -type f \( -name "*.sh" -o -name "*.py" \) -exec sed -i 's/\r$//' {} + \
    && find /workspace -type f -name "*.sh" -exec chmod +x {} +

WORKDIR /workspace/
ENTRYPOINT ["script/launch_ocr_train.sh"]
